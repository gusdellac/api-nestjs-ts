{
  "name": "NestJS + MySQL Dev",
  "dockerComposeFile": ["../docker-compose.dev.yml"],
  "service": "nest-app",
  "workspaceFolder": "/usr/src/app",

  "customizations": {
    "vscode": {
      "extensions": [
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "firsttris.vscode-jest-runner",
        "formulahendry.vscode-mysql",
        "mikestead.dotenv",
        "ms-azuretools.vscode-docker",
        "eamodio.gitlens",
        "GitHub.copilot",
        "GitHub.copilot-chat"  
      ],
      "settings": {
        "git.enabled": true,
        "git.autoRepositoryDetection": "openEditors",
        "git.ignoreMissingGitWarning": true,
        // evitar que VS Code sobreescriba la configuración de Git
        "git.allowNoVerifyCommit": false,
        "remote.containers.gitConfig": false
      }
    }
  },

  "postCreateCommand": "pnpm install",
  "forwardPorts": [3001, 3307],
  
  // configuraciones para git
  "mounts": [
    "source=${localEnv:HOME}${localEnv:USERPROFILE}/.gitconfig,target=/root/.gitconfig,type=bind",
    "source=${localEnv:HOME}${localEnv:USERPROFILE}/.ssh,target=/root/.ssh,type=bind,consistency=cached",
    // Agregar mount para credenciales de git
    "source=${localEnv:HOME}${localEnv:USERPROFILE}/.git-credentials,target=/root/.git-credentials,type=bind",
    // Agregar mount para credenciales de github copilot
    "source=${localEnv:HOME}${localEnv:APPDATA}/Code/User/globalStorage/github.copilot,target=/root/.vscode-server/data/User/globalStorage/github.copilot,type=bind"
  ],

  "containerEnv": {
    "DOCKER_HOST": "tcp://host.docker.internal:2375"
  },

  // Asegura que las claves ssh tengan permisos correctos dentro del contenedor
  "remoteUser": "root",

  // configuración para el workspace
  "workspaceMount": "source=${localWorkspaceFolder},target=/usr/src/app,type=bind,consistency=cached"
}